<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alumni Network - Stay Connected</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .hero-gradient { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 20px 40px rgba(0,0,0,0.1); }
    </style>
</head>
<body class="bg-gray-50">
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <div class="flex-shrink-0">
                        <h1 class="text-2xl font-bold text-indigo-600">AlumniConnect</h1>
                    </div>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="#home" class="text-gray-900 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">Home</a>
                        <a href="#directory" class="text-gray-500 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">Alumni</a>
                        <a href="#events" class="text-gray-500 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">Events</a>
                        <a href="internships.html" class="text-gray-500 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">Internships</a>
                        <a href="#careers" class="text-gray-500 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">Careers</a>

                        <div id="nav-loading" class="hidden">
                            <span class="text-gray-500 text-sm font-medium">Loading...</span>
                        </div>
                        <div id="user-profile-nav" class="flex items-center space-x-4 hidden">
                            <span id="user-name" class="text-gray-900 text-sm font-medium"></span>
                            <a href="profile.html">
                                <img id="profile-pic" class="w-8 h-8 rounded-full border-2 border-indigo-500" src="https://via.placeholder.com/150" alt="Profile Picture">
                            </a>
                            <button id="logout-button" class="bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-red-700 transition-colors">Log Out</button>
                        </div>
                        
                        <div id="auth-links-nav" class="flex items-center space-x-4">
                            <a href="login.html" class="text-gray-500 hover:text-indigo-600 px-3 py-2 text-sm font-medium transition-colors">Sign In</a>
                            <a href="signup.html" class="bg-indigo-600 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-indigo-700 transition-colors">Join Network</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </nav>

    <section id="home" class="hero-gradient text-white py-20">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-5xl md:text-6xl font-bold mb-6">Stay Connected.<br>Stay Inspired.</h1>
            <p class="text-xl md:text-2xl mb-8 text-indigo-100 max-w-3xl mx-auto">Join thousands of alumni building meaningful connections, sharing opportunities, and making an impact together.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="signup.html" class="bg-white text-indigo-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition-colors">Create Your Profile</a>
                <a href="#directory" class="border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-indigo-600 transition-colors">Browse Directory</a>
            </div>
        </div>
    </section>

    <section id="my-profile-section" class="py-16 bg-white hidden">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Your Profile</h2>
            </div>
            <div id="my-profile-card" class="max-w-md mx-auto bg-white rounded-xl p-6 shadow-xl border-t-4 border-indigo-600">
                <div class="w-24 h-24 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center text-gray-600 text-3xl font-bold overflow-hidden">
                    <img id="my-profile-pic" class="w-full h-full object-cover" src="https://via.placeholder.com/150" alt="Profile Picture">
                </div>
                <h3 id="my-name" class="text-2xl font-bold text-center mb-2"></h3>
                <p id="my-role" class="text-indigo-600 text-center mb-3"></p>
                <p id="my-details" class="text-gray-600 text-center text-sm"></p>
                <div class="mt-6 text-center">
                    <a href="profile.html" class="inline-block bg-indigo-500 text-white px-6 py-2 rounded-lg font-semibold hover:bg-indigo-600 transition-colors">Edit Profile</a>
                </div>
            </div>
        </div>
    </section>

    <section class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid grid-cols-2 md:grid-cols-4 gap-8 text-center">
                <div>
                    <div class="text-4xl font-bold text-indigo-600 mb-2">25,000+</div>
                    <div class="text-gray-600">Active Alumni</div>
                </div>
                <div>
                    <div class="text-4xl font-bold text-indigo-600 mb-2">150+</div>
                    <div class="text-gray-600">Countries</div>
                </div>
                <div>
                    <div class="text-4xl font-bold text-indigo-600 mb-2">500+</div>
                    <div class="text-gray-600">Companies</div>
                </div>
                <div>
                    <div class="text-4xl font-bold text-indigo-600 mb-2">75</div>
                    <div class="text-gray-600">Years of Legacy</div>
                </div>
            </div>
        </div>
    </section>

    <section id="directory" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Alumni Directory</h2>
                <p class="text-xl text-gray-600">Connect with graduates from different batches and departments.</p>
            </div>
            <div id="alumni-list" class="grid md:grid-cols-3 gap-8">
                <div id="alumni-sample" class="bg-white rounded-xl p-6 card-hover">
                    <div class="w-20 h-20 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full mx-auto mb-4 flex items-center justify-center text-white text-2xl font-bold">SJ</div>
                    <h3 class="text-xl font-semibold text-center mb-2">Sarah Johnson</h3>
                    <p class="text-indigo-600 text-center mb-3">Computer Science</p>
                    <p class="text-gray-600 text-center text-sm">Graduation Year: 2015</p>
                </div>
                <div class="bg-white rounded-xl p-6 card-hover">
                    <div class="w-20 h-20 bg-gradient-to-r from-blue-400 to-cyan-400 rounded-full mx-auto mb-4 flex items-center justify-center text-white text-2xl font-bold">MC</div>
                    <h3 class="text-xl font-semibold text-center mb-2">Michael Chen</h3>
                    <p class="text-indigo-600 text-center mb-3">Mechanical Engineering</p>
                    <p class="text-gray-600 text-center text-sm">Graduation Year: 2018</p>
                </div>
                <div class="bg-white rounded-xl p-6 card-hover">
                    <div class="w-20 h-20 bg-gradient-to-r from-green-400 to-blue-400 rounded-full mx-auto mb-4 flex items-center justify-center text-white text-2xl font-bold">AR</div>
                    <h3 class="text-xl font-semibold text-center mb-2">Ana Rodriguez</h3>
                    <p class="text-indigo-600 text-center mb-3">Journalism</p>
                    <p class="text-gray-600 text-center text-sm">Graduation Year: 2016</p>
                </div>
            </div>
        </div>
    </section>

    <section id="events" class="py-16 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Upcoming Events</h2>
                <p class="text-xl text-gray-600">Connect, learn, and grow with fellow alumni</p>
            </div>
            <div id="events-list" class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
                <div class="bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100">
                    <div class="flex items-center mb-4">
                        <div class="bg-indigo-600 text-white px-3 py-1 rounded-full text-sm font-medium">Virtual</div>
                        <div class="ml-auto text-sm text-gray-500">Dec 15, 2024</div>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Global Alumni Networking Night</h3>
                    <p class="text-gray-600 mb-4">Connect with alumni from around the world in our monthly virtual networking event.</p>
                    <button class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors">Register Now</button>
                </div>
                <div class="bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border border-green-100">
                    <div class="flex items-center mb-4">
                        <div class="bg-green-600 text-white px-3 py-1 rounded-full text-sm font-medium">In-Person</div>
                        <div class="ml-auto text-sm text-gray-500">Jan 20, 2025</div>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">New York Chapter Meetup</h3>
                    <p class="text-gray-600 mb-4">Join us for drinks and networking at the rooftop bar in Manhattan.</p>
                    <button class="w-full bg-green-600 text-white py-2 rounded-lg hover:bg-green-700 transition-colors">RSVP</button>
                </div>
                <div class="bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6 border border-orange-100">
                    <div class="flex items-center mb-4">
                        <div class="bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-medium">Workshop</div>
                        <div class="ml-auto text-sm text-gray-500">Feb 5, 2025</div>
                    </div>
                    <h3 class="text-xl font-semibold mb-2">Career Transition Workshop</h3>
                    <p class="text-gray-600 mb-4">Expert-led session on navigating career changes and finding new opportunities.</p>
                    <button class="w-full bg-orange-600 text-white py-2 rounded-lg hover:bg-orange-700 transition-colors">Join Workshop</button>
                </div>
            </div>
        </div>
    </section>

    <section id="careers" class="py-16 bg-gray-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="text-4xl font-bold text-gray-900 mb-4">Career Opportunities</h2>
                <p class="text-xl text-gray-600">Find job openings and career advice from our alumni.</p>
            </div>
            <div id="careers-list" class="grid md:grid-cols-2 gap-8">
                <article class="bg-white rounded-xl overflow-hidden shadow-sm card-hover">
                    <div class="h-48 bg-gradient-to-r from-blue-400 to-purple-500"></div>
                    <div class="p-6">
                        <div class="text-sm text-indigo-600 font-medium mb-2">ACHIEVEMENT</div>
                        <h3 class="text-xl font-semibold mb-3">Alumni Startup Raises $50M Series B</h3>
                        <p class="text-gray-600 mb-4">Class of 2015 graduate Emma Thompson's fintech company secures major funding round to expand globally.</p>
                        <div class="flex items-center text-sm text-gray-500">
                            <span>December 10, 2024</span>
                            <span class="mx-2">•</span>
                            <span>3 min read</span>
                        </div>
                    </div>
                </article>
                <article class="bg-white rounded-xl overflow-hidden shadow-sm card-hover">
                    <div class="h-48 bg-gradient-to-r from-green-400 to-blue-500"></div>
                    <div class="p-6">
                        <div class="text-sm text-green-600 font-medium mb-2">COMMUNITY</div>
                        <h3 class="text-xl font-semibold mb-3">New Mentorship Program Launch</h3>
                        <p class="text-gray-600 mb-4">Connect experienced alumni with recent graduates through our new structured mentorship initiative.</p>
                        <div class="flex items-center text-sm text-gray-500">
                            <span>December 8, 2024</span>
                            <span class="mx-2">•</span>
                            <span>2 min read</span>
                        </div>
                    </div>
                </article>
            </div>
        </div>
    </section>
    
    <section class="py-16 bg-indigo-600 text-white">
        <div class="max-w-4xl mx-auto text-center px-4 sm:px-6 lg:px-8">
            <h2 class="text-4xl font-bold mb-6">Ready to Reconnect?</h2>
            <p class="text-xl mb-8 text-indigo-100">Join our thriving alumni community and unlock opportunities for networking, mentorship, and lifelong friendships.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <a href="signup.html" class="bg-white text-indigo-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-gray-100 transition-colors">Create Your Profile</a>
                <a href="internships.html" class="border-2 border-white text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-white hover:text-indigo-600 transition-colors">View Internships</a>
            </div>
        </div>
    </section>

    <footer class="bg-gray-900 text-white py-12">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="grid md:grid-cols-4 gap-8">
                <div>
                    <h3 class="text-2xl font-bold mb-4">AlumniConnect</h3>
                    <p class="text-gray-400">Building bridges between past, present, and future generations of graduates.</p>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Quick Links</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">Alumni Directory</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Events Calendar</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Career Services</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Mentorship</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Resources</h4>
                    <ul class="space-y-2 text-gray-400">
                        <li><a href="#" class="hover:text-white transition-colors">News & Updates</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Success Stories</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Alumni Benefits</a></li>
                        <li><a href="#" class="hover:text-white transition-colors">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold mb-4">Stay Connected</h4>
                    <p class="text-gray-400 mb-4">Get the latest alumni news and updates</p>
                    <div class="flex">
                        <input type="email" id="newsletter-email" placeholder="Your email" class="flex-1 px-4 py-2 rounded-l-lg text-gray-900">
                        <button id="subscribe-btn" class="bg-indigo-600 px-4 py-2 rounded-r-lg hover:bg-indigo-700 transition-colors">Subscribe</button>
                    </div>
                </div>
            </div>
            <div class="border-t border-gray-800 mt-8 pt-8 text-center text-gray-400">
                <p>&copy; 2024 AlumniConnect. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-app.js";
        import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-auth.js";
        import { getDatabase, ref, get, child, onValue, push, set } from "https://www.gstatic.com/firebasejs/12.3.0/firebase-database.js";

        // Your Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDM772D6lzjRkj3VQxOV466Of3AgRPrxSk",
            authDomain: "alumniconnect-ee98c.firebaseapp.com",
            projectId: "alumniconnect-ee98c",
            storageBucket: "alumniconnect-ee98c.firebasestorage.app",
            messagingSenderId: "171857807694",
            appId: "1:171857807694:web:f7908c33c65e17b160361f",
            measurementId: "G-QEJ3YVDR3R"
        };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const dbRef = ref(getDatabase());

        const navLoading = document.getElementById('nav-loading');
        const userProfileNav = document.getElementById('user-profile-nav');
        const authLinksNav = document.getElementById('auth-links-nav');
        const userNameElement = document.getElementById('user-name');
        const profilePicElement = document.getElementById('profile-pic');
        const logoutButton = document.getElementById('logout-button');
        const subscribeBtn = document.getElementById('subscribe-btn');
        const newsletterEmailInput = document.getElementById('newsletter-email');
        const alumniList = document.getElementById('alumni-list');
        const eventsList = document.getElementById('events-list');
        const careersList = document.getElementById('careers-list');
        const myProfileSection = document.getElementById('my-profile-section');
        const myProfilePic = document.getElementById('my-profile-pic');
        const myName = document.getElementById('my-name');
        const myRole = document.getElementById('my-role');
        const myDetails = document.getElementById('my-details');

        // Authentication State Listener
        onAuthStateChanged(auth, async (user) => {
            navLoading.style.display = 'flex';
            userProfileNav.classList.add('hidden');
            authLinksNav.classList.add('hidden');
            myProfileSection.classList.add('hidden');

            if (user) {
                let userData = null;
                const alumniData = (await get(child(dbRef, `alumni/${user.uid}`))).val();
                if (alumniData) {
                    userData = alumniData;
                } else {
                    const studentData = (await get(child(dbRef, `students/${user.uid}`))).val();
                    if (studentData) {
                        userData = studentData;
                    }
                }
                navLoading.style.display = 'none';
                if (userData) {
                    userNameElement.textContent = `Hello, ${userData.firstName}!`;
                    if (userData.photoURL) {
                        profilePicElement.src = userData.photoURL;
                        myProfilePic.src = userData.photoURL;
                    } else {
                         profilePicElement.src = 'https://via.placeholder.com/150';
                         myProfilePic.src = 'https://via.placeholder.com/150';
                    }

                    // Display user's own profile card
                    myProfileSection.classList.remove('hidden');
                    myName.textContent = `${userData.firstName} ${userData.lastName}`;
                    myRole.textContent = `${userData.role.charAt(0).toUpperCase() + userData.role.slice(1)}`;
                    if (userData.role === 'alumni') {
                        myDetails.textContent = `Graduation Year: ${userData.graduationYear || 'N/A'} | Department: ${userData.department || 'N/A'}`;
                    } else if (userData.role === 'student') {
                        myDetails.textContent = `Enrollment No: ${userData.enrollmentNo || 'N/A'} | College: ${userData.college || 'N/A'}`;
                    }
                } else {
                    userNameElement.textContent = `Hello, ${user.displayName || user.email}!`;
                }
                userProfileNav.classList.remove('hidden');
            } else {
                navLoading.style.display = 'none';
                userProfileNav.classList.add('hidden');
                authLinksNav.classList.remove('hidden');
            }
        });

        // Logout functionality
        logoutButton.addEventListener('click', async () => {
            await signOut(auth);
        });

        // Newsletter subscription
        subscribeBtn.addEventListener('click', async (e) => {
            e.preventDefault();
            const email = newsletterEmailInput.value;
            if (email) {
                try {
                    await set(push(child(dbRef, 'subscribers')), { email: email, timestamp: Date.now() });
                    alert('Thank you for subscribing!');
                    newsletterEmailInput.value = '';
                } catch (error) {
                    alert('Subscription failed. Please try again.');
                }
            } else {
                alert('Please enter a valid email address.');
            }
        });

        // Dynamic Alumni Directory
        onValue(ref(dbRef, 'alumni'), (snapshot) => {
            alumniList.innerHTML = '';
            if (snapshot.exists()) {
                const alumniData = snapshot.val();
                Object.values(alumniData).forEach(alumnus => {
                    const card = document.createElement('div');
                    card.className = 'bg-white rounded-xl p-6 card-hover';
                    let initials = (alumnus.firstName ? alumnus.firstName.charAt(0) : '') + (alumnus.lastName ? alumnus.lastName.charAt(0) : '');
                    card.innerHTML = `
                        <div class="w-20 h-20 bg-gray-200 rounded-full mx-auto mb-4 flex items-center justify-center text-gray-600 text-2xl font-bold">
                            ${initials || 'N/A'}
                        </div>
                        <h3 class="text-xl font-semibold text-center mb-2">${alumnus.firstName} ${alumnus.lastName}</h3>
                        <p class="text-indigo-600 text-center mb-3">${alumnus.department || 'N/A'}</p>
                        <p class="text-gray-600 text-center text-sm">Graduation Year: ${alumnus.graduationYear || 'N/A'}</p>
                    `;
                    alumniList.appendChild(card);
                });
            } else {
                alumniList.innerHTML = `<div class="text-center text-gray-500 text-lg col-span-full">No alumni profiles found.</div>`;
            }
        });

        // Dynamic Events
        onValue(ref(dbRef, 'events'), (snapshot) => {
            eventsList.innerHTML = '';
            if (snapshot.exists()) {
                const eventsData = snapshot.val();
                Object.values(eventsData).forEach(event => {
                    const card = document.createElement('div');
                    card.className = 'bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100';
                    card.innerHTML = `
                        <div class="flex items-center mb-4">
                            <div class="bg-indigo-600 text-white px-3 py-1 rounded-full text-sm font-medium">${event.type || 'Virtual'}</div>
                            <div class="ml-auto text-sm text-gray-500">${event.date || 'Date N/A'}</div>
                        </div>
                        <h3 class="text-xl font-semibold mb-2">${event.title}</h3>
                        <p class="text-gray-600 mb-4">${event.description}</p>
                        <button class="w-full bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700 transition-colors">Register Now</button>
                    `;
                    eventsList.appendChild(card);
                });
            } else {
                eventsList.innerHTML = `<div class="text-center text-gray-500 text-lg col-span-full">No upcoming events.</div>`;
            }
        });

        // Dynamic Careers
        onValue(ref(dbRef, 'careers'), (snapshot) => {
            careersList.innerHTML = '';
            if (snapshot.exists()) {
                const careersData = snapshot.val();
                Object.values(careersData).forEach(career => {
                    const card = document.createElement('article');
                    card.className = 'bg-white rounded-xl overflow-hidden shadow-sm card-hover';
                    card.innerHTML = `
                        <div class="h-48 bg-gradient-to-r from-green-400 to-blue-500"></div>
                        <div class="p-6">
                            <div class="text-sm text-green-600 font-medium mb-2">${career.tag || 'COMMUNITY'}</div>
                            <h3 class="text-xl font-semibold mb-3">${career.title}</h3>
                            <p class="text-gray-600 mb-4">${career.description}</p>
                            <div class="flex items-center text-sm text-gray-500">
                                <span>${career.date || 'Date N/A'}</span>
                                <span class="mx-2">•</span>
                                <span>${career.readTime || '3 min read'}</span>
                            </div>
                        </div>
                    `;
                    careersList.appendChild(card);
                });
            } else {
                careersList.innerHTML = `<div class="text-center text-gray-500 text-lg col-span-full">No career updates.</div>`;
            }
        });
    </script>
</body>
</html>